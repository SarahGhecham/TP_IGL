<app-navbar></app-navbar>

<div class="ordonnance-form-container">
  <!-- Back Button -->
  <button class="back-button" (click)="onBack()" aria-label="Retour">
    <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true">
      <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
    </svg>
    Retour
  </button>

  <!-- Page Title -->
  <h1 class="ordonnance-title">Ordonnance Médicale</h1>

  <!-- Success Notification -->
  <div *ngIf="successMessage" class="notification success" role="alert">
    {{ successMessage }}
  </div>

  <!-- Error Notification -->
  <div *ngIf="errorMessage" class="notification error" role="alert">
    {{ errorMessage }}
  </div>

  <!-- Form Section -->
  <form [formGroup]="ordonnanceForm" (ngSubmit)="onSubmit()" class="ordonnance-form">
    <!-- Patient Name Display -->
    <div class="form-header">
      <h2>Patient: {{ patientName }}</h2>
    </div>

    <!-- Date Ordonnance -->
    <div class="form-group">
      <label for="date_ordonnance">Date de l'Ordonnance</label>
      <input 
        id="date_ordonnance" 
        type="date" 
        formControlName="date_ordonnance" 
        required 
        aria-required="true"
        aria-describedby="date-help"
      />
      <small id="date-help" class="help-text">Veuillez sélectionner une date.</small>
      <div *ngIf="ordonnanceForm.get('date_ordonnance')?.invalid && ordonnanceForm.get('date_ordonnance')?.touched" class="error-message">
        Date de l'ordonnance est requise.
      </div>
    </div>

    <!-- Ordonnance Text -->
    <div class="form-group">
      <label for="text">Texte de l'Ordonnance</label>
      <textarea 
        id="text" 
        rows="6" 
        formControlName="text" 
        required 
        aria-required="true"
        aria-describedby="text-help"
      ></textarea>
      <small id="text-help" class="help-text">Texte de l'ordonnance (au moins 10 caractères).</small>
      <div *ngIf="ordonnanceForm.get('text')?.invalid && ordonnanceForm.get('text')?.touched" class="error-message">
        Le texte de l'ordonnance est requis.
      </div>

      <div class="submit-container">
        <!-- Submit Button -->
   <button 
   type="submit" 
   [disabled]="ordonnanceForm.invalid" 
   class="submit-button"
 >
   Soumettre
 </button>

   </div>
    </div>
  
   
  </form>
</div>
